# Pull Requests

Salt是一个大型软件项目，许多开发人员共同努力。 我们鼓励所有Salt用户提供新功能、错误修复和文档修复。 对于那些尚未为大型软件项目做出贡献的人，我们建议您在准备 pull request 时考虑以下问题。

这不是一个详尽的列表，这些规则不一定是一成不变的规则，但这是我们在审阅 pull request 时要考虑的事项。

- 此更改是否适用于所有平台？如果不是这样，是否向用户提供了适当且易于理解的理由？它是按原样记录的吗？我们是否考虑过所有可能使用和使用此代码的方法？
- 这段代码可以在我们支持的所有Python版本上运行吗？可以在将来的版本中使用吗？
- 是否使用Python保留关键字？变量的命名方式是否便于下一个人理解正在发生的事情？
- 此代码是否以任何方式带来安全风险？攻击者可以用此代码执行的最坏的事情是什么？如果可能发生危险情况，将它们记录下来是否合适？如果是这样，是否已完成？这项更改是否可以通过专业的安全审核？对于使用此代码的人来说，明显的风险是什么？
- 可读吗？它符合我们的风格指南吗？是否记录了代码，以便下次出现的人能够阅读和理解它？最特别的是，是否记录了边缘情况以避免回归？对进行此更改的下一个人是否会立即显而易见？
- 如果适当，是​​否已通知编写正被修改的代码的人员并包括在过程中？
- 此更改对性能有何影响？有没有更有效的方法来构建逻辑，如果这样，进行更改是否会以合理的方式使其自身与可读性相平衡？代码的性能特征是否根据调用方式（即通过API或各种命令行工具）而变化。如果可能会很容易地对此变化进行概要分析？
- 变更中是否考虑并记录了警告？
- 代码支持扩展吗？更关键的是，它可以在两个方向上扩展吗？ Salt在数据中心和Sahara中的Raspberry Pi安装中运行。它需要同时支持在大型服务器和小型设备上工作。
- 是否在面向公众的文档和在线文档中都编写了适当的文档？用户将如何知道如何使用它？如果无法正常工作，他们将如何处理？新用户会理解吗？用户是否可以通过阅读公共文档了解有关此功能的所有信息？
- 这是行为上的改变吗？如果是这样，它是否在适当的分支中？是否需要弃用警告？这些更改是否已被完整记录？我们是否已充分考虑过行为改变可能带来的影响？
- 代码如何经过测试？如果合适，是否有自动化测试可以解决这个问题？它可能回退吗？如果是这样，如何减轻这种回退的可能性？有什么计划可以确保此代码继续向前发展？
- 如果是异步代码，那么潜在的竞争条件是什么？
- 该代码是原创作品吗？如果是从另一个项目借来的或在网上找到的，是否可以处理适当的许可/归属注意事项？
- PR中是否已充分说明了更改的原因？如果不进行审查，则这是必要的，以便将来有人可以回过头来弄清为什么这样做是必要的。
- 变更的预期行为是否明确？将来的贡献者和用户将如何知道这种行为？
- 该代码是否以合理的方式处理错误？我们是否已尽可能多地遍历整个堆栈，以确保不会引起我们没有解释的错误？是否测试了错误以及正确的功能？
- 如果代码依赖于外部库，我们是否可以正确处理它们的旧版本？我们是否需要特定版本，如果需要，是否执行此版本检查？该库是否在相关模块声称支持的平台上可用？如果代码是针对特定库编写和测试的，那么我们是否记录了这一事实？
- 此代码可以freeze/hang/crash正在运行的守护程序吗？它可以使状态运行停止吗？有无限循环吗？是否实施了适当的超时？
- 功能接口文件是否完整记录？如果无法通过自省来推断参数类型，是否将其记录下来？
- 使用诸如文件句柄之类的资源后是否将其清除？
- 可能会在对象之间存在循环引用，导致内存泄漏的吗？
- 代码是否整齐，是否通过所有测试？
- 更改是否可以完全解决问题，还是仅限于较小的局部问题？由此，我的意思是应该清楚的是，提交者在功能或模块中寻找了其他案例，在这些案例中也可能处理给定案例。如果需要进行其他更改，是否将它们作为FIXME或PR记录在代码中，并将其记录在Github中作为要跟踪的问题？
- 在正常运行期间，代码是否会将错误/警告/堆栈跟踪信息抛出到控制台？
- 是否已删除所有调试？
- 代码是否记录任何敏感数据？它在进程列表中显示敏感数据吗？它是否将敏感数据存储到磁盘？如果是，它是否以安全的方式存储？在将数据写入磁盘和设置适当的权限之间是否存在潜在的竞争条件？
从解决方案中是否可以清楚地了解到这个问题？从未见过问题的人怎么会对此提议的变更是最好的改变充满信心？
- 是否可能不使用硬编码？我们是否在为用户做出明智的决定，并允许他们在适当的时候进行调整和更改？
- 是否在适当的地方使用实用程序功能？此更改是否会重新实现我们已有的代码？
- 正确的事情已经解决了吗？在某些情况下，更适合修复测试，而在某些情况下，更适合修复正在测试的代码。哪个最适合用户？这是一个捷径还是一个解决方案，它将在未来数月乃至数年内保持稳定？
- 此代码将如何对代码库中其他地方的更改做出反应？它与什么耦合，我们是否已充分考虑过如何最好地为给定功能或方法的使用者提供一致的接口？
- 该PR是否会尝试一次修复太多错误/问题？
- 是否应该将其分为多个PR，以使其更易于测试和推理？
